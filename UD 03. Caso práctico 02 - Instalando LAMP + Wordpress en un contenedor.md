UD 03. Caso práctico 02 - Instalando LAMP + Wordpress en un contenedor

Crearemos un contenedor con la imagen base “ubuntu” (esta vez, indicando una versión, la que tiene la etiqueta “22.10”), al que llamaremos LAMP y en el que expondremos su puesto 80 dentro del puerto 8080 de nuestro sistema. 
Además, al crearlo, dejaremos lista una “shell” para instalar los programas pertinentes. 
Esto podemos hacerlo con la orden:

<img width="861" height="198" alt="captura 1 lamp + wordpress" src="https://github.com/user-attachments/assets/176e6cbc-bbc6-40a1-b35b-8b46022841e3" />

A continuación, detallamos los pasos a seguir.
3.1 Actualizando repositorio e instalando LAMP + Wordpress
En primer lugar, actualizamos la lista de paquetes del repositorio: apt update

<img width="904" height="796" alt="captura 2 lamp + wordpress" src="https://github.com/user-attachments/assets/9a062fd4-f236-411b-b210-3077953a28d3" />

Tras ello, instalamos los paquetes necesarios para instalar LAMP + Wordpress
apt install wordpress php libapache2-mod-php mariadb-server php-mysql

<img width="933" height="731" alt="captura 3 lamp + wordpress" src="https://github.com/user-attachments/assets/0d99387a-8bb1-491d-9b5b-b56a9fb522b1" />

Tras ello podemos lanzar el servicio Apache con el comando: service apache2 start

<img width="516" height="41" alt="captura 4 lamp + wordpress" src="https://github.com/user-attachments/assets/0510705a-36aa-4181-8c83-14121374190a" />

Antes que nada, podemos instalar un editor de texto en modo consola que sea de vuestro agrado.
Por ejemplo, con este comando podemos instalar “nano”: apt install nano

<img width="894" height="204" alt="captura 5 lamp + wordpress" src="https://github.com/user-attachments/assets/db4e4521-ff82-4de5-be34-28c58f7b7498" />

Una vez instalado vuestro editor favorito, procedemos a editar la configuración de Apache para
trabajar con Wordpress. Deberemos crear el fichero de configuración del sitio en Apache
“/etc/apache2/sites-available/wordpress.conf” que configurará el acceso al sitio Wordpress.
Dicho fichero deberá tener el siguiente contenido:

<img width="893" height="312" alt="captura 6 lamp + wordpress" src="https://github.com/user-attachments/assets/2523600e-f9d0-4fbe-ad5d-53384a85a7c0" />

Creado el fichero, deberemos cargar el sitio, habilitar “URL rewriting” y recargar Apache con los
siguientes comandos: a2ensite wordpress

<img width="492" height="37" alt="captura 7 lamp + wordpress" src="https://github.com/user-attachments/assets/79da6856-f692-4882-b2a4-446fe5998e07" />

a2enmod rewrite:

<img width="448" height="39" alt="captura 8 lamp + wordpress" src="https://github.com/user-attachments/assets/498837f4-64c1-4471-8921-d55db7a7c1b6" />

service apache2 restart:

<img width="541" height="39" alt="captura 9 lamp + wordpress" src="https://github.com/user-attachments/assets/16439c84-1d0b-4465-a46b-3c7a40106603" />

3.3 Preparando MariaDB Server
En primer lugar, deberemos poner en marcha el servicio con el comando: service mariadb start

<img width="514" height="40" alt="captura 10 lamp + wordpress" src="https://github.com/user-attachments/assets/db2cee3c-c838-475a-bfca-04834eed8a65" />

Tras ello, deberemos ejecutar el comando para generar un password de root de MySQL Server de
forma segura (deberemos recordarlo) y otras opciones. El comando a ejecutar es:

<img width="753" height="712" alt="captura 11 lamp + wordpress" src="https://github.com/user-attachments/assets/2a57391f-3a60-414e-b297-f3cc541096f3" />

Tras ello, accederemos a la base de datos con el cliente MySQL de la siguiente forma:

<img width="731" height="202" alt="captura 12 lamp + wordpress" src="https://github.com/user-attachments/assets/1719b5d1-5b6d-4f80-9661-752031ac0a75" />

Tras indicar la contraseña de “root”, podremos escribir comandos para MySQL. Escribiremos los
siguientes comandos. En primer lugar, creamos la base de datos “wordpress”:

<img width="435" height="87" alt="captura 13 lamp + wordpress" src="https://github.com/user-attachments/assets/7a3e335f-dbaf-4f49-b6b1-b390ba9da9c7" />

Tras ellos, creamos el usuario “wordpress” (con contraseña “MiPass-2023”) y le damos permisos
totales en la base de datos “wordpress”.

<img width="686" height="82" alt="captura 14 lamp + wordpress" src="https://github.com/user-attachments/assets/ead6c38e-22c2-4c86-aa6f-72db20ab7a75" />

<img width="839" height="84" alt="captura 15 lamp + wordpress" src="https://github.com/user-attachments/assets/c42792a2-40d5-47cf-9c41-af8aa02403e7" />

Finalmente, propagamos los privilegios establecidos para que ya estén operativos en el servidor.

<img width="378" height="88" alt="captura 16 lamp + wordpress" src="https://github.com/user-attachments/assets/599c0407-d456-47c5-99c6-a9b00105f638" />

Usando un editor de texto de consola, vamos a editar el fichero de configuración de Wordpress,
“/etc/wordpress/config-localhost.php”, quedando de la forma que quede como ahora indicamos:

<img width="891" height="229" alt="captura 17 lamp + wordpress" src="https://github.com/user-attachments/assets/2f299480-e93a-41fe-af81-54e7faf13551" />

Por último, para comprobar que todo ha funcionado correctamente, probaremos a parar el
contenedor, ponerlo de nuevo en marcha y comprobar que podemos acceder a nuestro Wordpress
en http://localhost:8080/blog. Para parar y lanzar el contenedor utilizaremos los comandos:
Podremos observar algo similar a esto:

